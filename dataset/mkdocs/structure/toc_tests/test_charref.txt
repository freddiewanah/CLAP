def get_markdown_toc(markdown_source):
    """Return TOC generated by Markdown parser from Markdown source text."""
    md = markdown.Markdown(extensions=['toc'])
    md.convert(markdown_source)
    return md.toc_tokens

----------

def test_charref(self):
    md = '# &#64;Header'
    expected = '&#64;Header - #header'
    toc = get_toc(get_markdown_toc(md))
    self.assertEqual(str(toc).strip(), expected)
    self.assertEqual(len(toc), 1)

----------



Test Class Name: TableOfContentsTests